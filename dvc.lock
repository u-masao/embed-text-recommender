schema: '2.0'
stages:
  make_dataset:
    cmd: poetry run python -m src.data.make_dataset llm-book/livedoor-news-corpus
      data/interim/dataset.parquet --mlflow_run_name=pipeline
    deps:
    - path: src/data/make_dataset.py
      hash: md5
      md5: 65a0d1cbb6d770116bbdf44e33c4f1d9
      size: 1966
    outs:
    - path: data/interim/dataset.parquet
      hash: md5
      md5: 84f7b4101f99436d806c1ae5b6a03855
      size: 15034840
  build_vectors:
    cmd: poetry run python -m src.features.build_features data/interim/dataset.parquet
      data/interim/vectors.cloudpickle --mlflow_run_name=pipeline
    deps:
    - path: data/interim/dataset.parquet
      hash: md5
      md5: 84f7b4101f99436d806c1ae5b6a03855
      size: 15034840
    - path: src/features/build_features.py
      hash: md5
      md5: 7fecc8d0d7290278996824171a30568e
      size: 2254
    outs:
    - path: data/interim/vectors.cloudpickle
      hash: md5
      md5: a30ae193321092a6b314a7587e0fb308
      size: 74004186
  build_vector_db:
    cmd: poetry run python -m src.features.build_vector_db data/interim/vectors.cloudpickle
      data/interim/engine.cloudpickle --mlflow_run_name=pipeline
    deps:
    - path: data/interim/vectors.cloudpickle
      hash: md5
      md5: a30ae193321092a6b314a7587e0fb308
      size: 74004186
    - path: src/features/build_vector_db.py
      hash: md5
      md5: 3213a1d12ff9c7480873bb2a308249e7
      size: 3003
    outs:
    - path: data/interim/engine.cloudpickle
      hash: md5
      md5: bed14b22bed13b195f7b4f7e5b1bde53
      size: 68029608
