schema: '2.0'
stages:
  make_dataset:
    cmd: poetry run python -m src.data.make_dataset llm-book/livedoor-news-corpus
      data/interim/dataset.parquet --mlflow_run_name=pipeline
    deps:
    - path: src/data/make_dataset.py
      hash: md5
      md5: f463cf85b1dd698468458d298eb0d09c
      size: 2031
    outs:
    - path: data/interim/dataset.parquet
      hash: md5
      md5: bc237833c9ceab972308b563cfaf3b11
      size: 15023178
  build_vectors:
    cmd: poetry run python -m src.features.build_features data/interim/dataset.parquet
      data/interim/vectors.cloudpickle --mlflow_run_name=pipeline --model_name_or_filepath=oshizo/sbert-jsnli-luke-japanese-base-lite
    deps:
    - path: data/interim/dataset.parquet
      hash: md5
      md5: bc237833c9ceab972308b563cfaf3b11
      size: 15023178
    - path: src/features/build_features.py
      hash: md5
      md5: 3fa96f07948ae96eea511a3e3bb8591b
      size: 2115
    outs:
    - path: data/interim/vectors.cloudpickle
      hash: md5
      md5: d3f94ae0293a3d16e20e4acae6d4f2d2
      size: 73989523
  build_vector_db:
    cmd: poetry run python -m src.features.build_vector_db data/interim/vectors.cloudpickle
      data/interim/engine.cloudpickle --mlflow_run_name=pipeline
    deps:
    - path: data/interim/vectors.cloudpickle
      hash: md5
      md5: d3f94ae0293a3d16e20e4acae6d4f2d2
      size: 73989523
    - path: src/features/build_vector_db.py
      hash: md5
      md5: 05654144501b2f8bae2511aecc747baa
      size: 1871
    outs:
    - path: data/interim/engine.cloudpickle
      hash: md5
      md5: e9158b9e564c885ade6a6669034e34ef
      size: 67990513
  recommend:
    cmd: poetry run python -m src.models.recommend data/interim/engine.cloudpickle
      --mlflow_run_name=pipeline --model_name_or_filepath=oshizo/sbert-jsnli-luke-japanese-base-lite
    deps:
    - path: data/interim/engine.cloudpickle
      hash: md5
      md5: e9158b9e564c885ade6a6669034e34ef
      size: 67990513
    - path: src/models/recommend.py
      hash: md5
      md5: 81fb714b3e4ee513723cad98ce87ba0e
      size: 1904
  build_vectors@oshizo/sbert-jsnli-luke-japanese-base-lite:
    cmd: poetry run python -m src.features.build_features data/interim/dataset.parquet
      models/oshizo/sbert-jsnli-luke-japanese-base-lite/vectors.cloudpickle --mlflow_run_name=pipeline
      --model_name_or_filepath=oshizo/sbert-jsnli-luke-japanese-base-lite
    deps:
    - path: data/interim/dataset.parquet
      hash: md5
      md5: bc237833c9ceab972308b563cfaf3b11
      size: 15023178
    - path: src/features/build_features.py
      hash: md5
      md5: 5d71795c73120cd3f79a2dd4f24ed26b
      size: 1910
    - path: src/models/vector_builder.py
      hash: md5
      md5: fa1927913e6049e5f76da09fe91e7b37
      size: 361
    outs:
    - path: models/oshizo/sbert-jsnli-luke-japanese-base-lite/vectors.cloudpickle
      hash: md5
      md5: 637a0473bc66601c344922083d052bc7
      size: 73989523
  recommend@oshizo/sbert-jsnli-luke-japanese-base-lite:
    cmd: poetry run python -m src.models.recommend models/oshizo/sbert-jsnli-luke-japanese-base-lite/engine.cloudpickle
      --mlflow_run_name=pipeline --model_name_or_filepath=oshizo/sbert-jsnli-luke-japanese-base-lite
    deps:
    - path: models/oshizo/sbert-jsnli-luke-japanese-base-lite/engine.cloudpickle
      hash: md5
      md5: e9158b9e564c885ade6a6669034e34ef
      size: 67990513
    - path: src/models/embedder.py
      hash: md5
      md5: 07739ff77d0ec7b83eb2b30bca54d3d7
      size: 6567
    - path: src/models/recommend.py
      hash: md5
      md5: 77a3175dd424798e35afc579dac52af1
      size: 1908
    - path: src/models/vector_engine.py
      hash: md5
      md5: 9f128fccd0c53da38f04a6584aba9c19
      size: 4204
  build_vectors@intfloat/multilingual-e5-small:
    cmd: poetry run python -m src.features.build_features data/interim/dataset.parquet
      models/intfloat/multilingual-e5-small/vectors.cloudpickle --mlflow_run_name=pipeline
      --model_name_or_filepath=intfloat/multilingual-e5-small
    deps:
    - path: data/interim/dataset.parquet
      hash: md5
      md5: bc237833c9ceab972308b563cfaf3b11
      size: 15023178
    - path: src/features/build_features.py
      hash: md5
      md5: 5d71795c73120cd3f79a2dd4f24ed26b
      size: 1910
    - path: src/models/vector_builder.py
      hash: md5
      md5: fa1927913e6049e5f76da09fe91e7b37
      size: 361
    outs:
    - path: models/intfloat/multilingual-e5-small/vectors.cloudpickle
      hash: md5
      md5: eb9926dc07b1e2011c7234bbb8bbc8a0
      size: 62673811
  build_vector_db@intfloat/multilingual-e5-small:
    cmd: poetry run python -m src.features.build_vector_db models/intfloat/multilingual-e5-small/vectors.cloudpickle
      models/intfloat/multilingual-e5-small/engine.cloudpickle --mlflow_run_name=pipeline
    deps:
    - path: models/intfloat/multilingual-e5-small/vectors.cloudpickle
      hash: md5
      md5: eb9926dc07b1e2011c7234bbb8bbc8a0
      size: 62673811
    - path: src/features/build_vector_db.py
      hash: md5
      md5: 8fe3e948b1f64fc2153f1dae1ef85d6e
      size: 1844
    - path: src/models/vector_engine.py
      hash: md5
      md5: 9f128fccd0c53da38f04a6584aba9c19
      size: 4204
    outs:
    - path: models/intfloat/multilingual-e5-small/engine.cloudpickle
      hash: md5
      md5: 94e54d85f430ece3b32c4af0d3908d1c
      size: 34043377
  recommend@intfloat/multilingual-e5-small:
    cmd: poetry run python -m src.models.recommend models/intfloat/multilingual-e5-small/engine.cloudpickle
      --mlflow_run_name=pipeline --model_name_or_filepath=intfloat/multilingual-e5-small
    deps:
    - path: models/intfloat/multilingual-e5-small/engine.cloudpickle
      hash: md5
      md5: 94e54d85f430ece3b32c4af0d3908d1c
      size: 34043377
    - path: src/models/recommend.py
      hash: md5
      md5: 96febe76b808ef16bd54f75b1ff92d97
      size: 1902
    - path: src/models/vector_builder.py
      hash: md5
      md5: fa1927913e6049e5f76da09fe91e7b37
      size: 361
    - path: src/models/vector_engine.py
      hash: md5
      md5: 9f128fccd0c53da38f04a6584aba9c19
      size: 4204
  build_vectors@intfloat/multilingual-e5-base:
    cmd: poetry run python -m src.features.build_features data/interim/dataset.parquet
      models/intfloat/multilingual-e5-base/vectors.cloudpickle --mlflow_run_name=pipeline
      --model_name_or_filepath=intfloat/multilingual-e5-base
    deps:
    - path: data/interim/dataset.parquet
      hash: md5
      md5: bc237833c9ceab972308b563cfaf3b11
      size: 15023178
    - path: src/features/build_features.py
      hash: md5
      md5: 5d71795c73120cd3f79a2dd4f24ed26b
      size: 1910
    - path: src/models/vector_builder.py
      hash: md5
      md5: fa1927913e6049e5f76da09fe91e7b37
      size: 361
    outs:
    - path: models/intfloat/multilingual-e5-base/vectors.cloudpickle
      hash: md5
      md5: 47cc90ba6b31951591f523c535d98cfa
      size: 73989523
  build_vectors@intfloat/multilingual-e5-large:
    cmd: poetry run python -m src.features.build_features data/interim/dataset.parquet
      models/intfloat/multilingual-e5-large/vectors.cloudpickle --mlflow_run_name=pipeline
      --model_name_or_filepath=intfloat/multilingual-e5-large
    deps:
    - path: data/interim/dataset.parquet
      hash: md5
      md5: bc237833c9ceab972308b563cfaf3b11
      size: 15023178
    - path: src/features/build_features.py
      hash: md5
      md5: 5d71795c73120cd3f79a2dd4f24ed26b
      size: 1910
    - path: src/models/vector_builder.py
      hash: md5
      md5: fa1927913e6049e5f76da09fe91e7b37
      size: 361
    outs:
    - path: models/intfloat/multilingual-e5-large/vectors.cloudpickle
      hash: md5
      md5: 572702e6fb62b02487f43f7cbce2ca97
      size: 81533331
  build_vector_db@intfloat/multilingual-e5-base:
    cmd: poetry run python -m src.features.build_vector_db models/intfloat/multilingual-e5-base/vectors.cloudpickle
      models/intfloat/multilingual-e5-base/engine.cloudpickle --mlflow_run_name=pipeline
    deps:
    - path: models/intfloat/multilingual-e5-base/vectors.cloudpickle
      hash: md5
      md5: 47cc90ba6b31951591f523c535d98cfa
      size: 73989523
    - path: src/features/build_vector_db.py
      hash: md5
      md5: 8fe3e948b1f64fc2153f1dae1ef85d6e
      size: 1844
    - path: src/models/vector_engine.py
      hash: md5
      md5: 9f128fccd0c53da38f04a6584aba9c19
      size: 4204
    outs:
    - path: models/intfloat/multilingual-e5-base/engine.cloudpickle
      hash: md5
      md5: f42d2efbcd8b08b2f6d152dcb7629b1e
      size: 67990513
  build_vector_db@intfloat/multilingual-e5-large:
    cmd: poetry run python -m src.features.build_vector_db models/intfloat/multilingual-e5-large/vectors.cloudpickle
      models/intfloat/multilingual-e5-large/engine.cloudpickle --mlflow_run_name=pipeline
    deps:
    - path: models/intfloat/multilingual-e5-large/vectors.cloudpickle
      hash: md5
      md5: 572702e6fb62b02487f43f7cbce2ca97
      size: 81533331
    - path: src/features/build_vector_db.py
      hash: md5
      md5: 8fe3e948b1f64fc2153f1dae1ef85d6e
      size: 1844
    - path: src/models/vector_engine.py
      hash: md5
      md5: 9f128fccd0c53da38f04a6584aba9c19
      size: 4204
    outs:
    - path: models/intfloat/multilingual-e5-large/engine.cloudpickle
      hash: md5
      md5: 0059c7e6b9cadda5c5edea5c25980ca8
      size: 90621937
  build_vector_db@oshizo/sbert-jsnli-luke-japanese-base-lite:
    cmd: poetry run python -m src.features.build_vector_db models/oshizo/sbert-jsnli-luke-japanese-base-lite/vectors.cloudpickle
      models/oshizo/sbert-jsnli-luke-japanese-base-lite/engine.cloudpickle --mlflow_run_name=pipeline
    deps:
    - path: models/oshizo/sbert-jsnli-luke-japanese-base-lite/vectors.cloudpickle
      hash: md5
      md5: 637a0473bc66601c344922083d052bc7
      size: 73989523
    - path: src/features/build_vector_db.py
      hash: md5
      md5: 8fe3e948b1f64fc2153f1dae1ef85d6e
      size: 1844
    - path: src/models/vector_engine.py
      hash: md5
      md5: 9f128fccd0c53da38f04a6584aba9c19
      size: 4204
    outs:
    - path: models/oshizo/sbert-jsnli-luke-japanese-base-lite/engine.cloudpickle
      hash: md5
      md5: d83429b77bf3363fa3eab7fa4de787a4
      size: 67990513
  recommend@intfloat/multilingual-e5-base:
    cmd: poetry run python -m src.models.recommend models/intfloat/multilingual-e5-base/engine.cloudpickle
      --mlflow_run_name=pipeline --model_name_or_filepath=intfloat/multilingual-e5-base
    deps:
    - path: models/intfloat/multilingual-e5-base/engine.cloudpickle
      hash: md5
      md5: f42d2efbcd8b08b2f6d152dcb7629b1e
      size: 67990513
    - path: src/models/recommend.py
      hash: md5
      md5: 96febe76b808ef16bd54f75b1ff92d97
      size: 1902
    - path: src/models/vector_builder.py
      hash: md5
      md5: fa1927913e6049e5f76da09fe91e7b37
      size: 361
    - path: src/models/vector_engine.py
      hash: md5
      md5: 9f128fccd0c53da38f04a6584aba9c19
      size: 4204
  recommend@intfloat/multilingual-e5-large:
    cmd: poetry run python -m src.models.recommend models/intfloat/multilingual-e5-large/engine.cloudpickle
      --mlflow_run_name=pipeline --model_name_or_filepath=intfloat/multilingual-e5-large
    deps:
    - path: models/intfloat/multilingual-e5-large/engine.cloudpickle
      hash: md5
      md5: 0059c7e6b9cadda5c5edea5c25980ca8
      size: 90621937
    - path: src/models/recommend.py
      hash: md5
      md5: 96febe76b808ef16bd54f75b1ff92d97
      size: 1902
    - path: src/models/vector_builder.py
      hash: md5
      md5: fa1927913e6049e5f76da09fe91e7b37
      size: 361
    - path: src/models/vector_engine.py
      hash: md5
      md5: 9f128fccd0c53da38f04a6584aba9c19
      size: 4204
  build_vectors@sentence-transformers/paraphrase-multilingual-MiniLM-L12-v2:
    cmd: poetry run python -m src.features.build_features data/interim/dataset.parquet
      models/sentence-transformers/paraphrase-multilingual-MiniLM-L12-v2/vectors.cloudpickle
      --mlflow_run_name=pipeline 
      --model_name_or_filepath=sentence-transformers/paraphrase-multilingual-MiniLM-L12-v2
    deps:
    - path: data/interim/dataset.parquet
      hash: md5
      md5: bc237833c9ceab972308b563cfaf3b11
      size: 15023178
    - path: src/features/build_features.py
      hash: md5
      md5: 5d71795c73120cd3f79a2dd4f24ed26b
      size: 1910
    - path: src/models/vector_builder.py
      hash: md5
      md5: fa1927913e6049e5f76da09fe91e7b37
      size: 361
    outs:
    - path: 
        models/sentence-transformers/paraphrase-multilingual-MiniLM-L12-v2/vectors.cloudpickle
      hash: md5
      md5: bc578ff7021f56d28f23df2289f2be6f
      size: 62673811
  build_vector_db@sentence-transformers/paraphrase-multilingual-MiniLM-L12-v2:
    cmd: poetry run python -m src.features.build_vector_db 
      models/sentence-transformers/paraphrase-multilingual-MiniLM-L12-v2/vectors.cloudpickle
      models/sentence-transformers/paraphrase-multilingual-MiniLM-L12-v2/engine.cloudpickle
      --mlflow_run_name=pipeline
    deps:
    - path: 
        models/sentence-transformers/paraphrase-multilingual-MiniLM-L12-v2/vectors.cloudpickle
      hash: md5
      md5: bc578ff7021f56d28f23df2289f2be6f
      size: 62673811
    - path: src/features/build_vector_db.py
      hash: md5
      md5: 8fe3e948b1f64fc2153f1dae1ef85d6e
      size: 1844
    - path: src/models/vector_engine.py
      hash: md5
      md5: 9f128fccd0c53da38f04a6584aba9c19
      size: 4204
    outs:
    - path: 
        models/sentence-transformers/paraphrase-multilingual-MiniLM-L12-v2/engine.cloudpickle
      hash: md5
      md5: 93dec1fa14d7ed901431245412b1040d
      size: 34043377
  recommend@sentence-transformers/paraphrase-multilingual-MiniLM-L12-v2:
    cmd: poetry run python -m src.models.recommend 
      models/sentence-transformers/paraphrase-multilingual-MiniLM-L12-v2/engine.cloudpickle
      --mlflow_run_name=pipeline 
      --model_name_or_filepath=sentence-transformers/paraphrase-multilingual-MiniLM-L12-v2
    deps:
    - path: 
        models/sentence-transformers/paraphrase-multilingual-MiniLM-L12-v2/engine.cloudpickle
      hash: md5
      md5: 93dec1fa14d7ed901431245412b1040d
      size: 34043377
    - path: src/models/recommend.py
      hash: md5
      md5: 96febe76b808ef16bd54f75b1ff92d97
      size: 1902
    - path: src/models/vector_builder.py
      hash: md5
      md5: fa1927913e6049e5f76da09fe91e7b37
      size: 361
    - path: src/models/vector_engine.py
      hash: md5
      md5: 9f128fccd0c53da38f04a6584aba9c19
      size: 4204
  build_vectors@oshizo/sbert-jsnli-luke-japanese-base-lite-head_only:
    cmd: poetry run python -m src.features.build_features data/interim/dataset.parquet
      models/oshizo/sbert-jsnli-luke-japanese-base-lite/vectors_head_only.cloudpickle
      --mlflow_run_name=pipeline --model_name_or_filepath=oshizo/sbert-jsnli-luke-japanese-base-lite
      --embedding_method=head_only
    deps:
    - path: data/interim/dataset.parquet
      hash: md5
      md5: bc237833c9ceab972308b563cfaf3b11
      size: 15023178
    - path: src/features/build_features.py
      hash: md5
      md5: d1abfe414d96e1baa852161d9e91d6eb
      size: 2084
    - path: src/models/embedder.py
      hash: md5
      md5: 07739ff77d0ec7b83eb2b30bca54d3d7
      size: 6567
    outs:
    - path: models/oshizo/sbert-jsnli-luke-japanese-base-lite/vectors_head_only.cloudpickle
      hash: md5
      md5: d3f94ae0293a3d16e20e4acae6d4f2d2
      size: 73989523
  build_vector_db@oshizo/sbert-jsnli-luke-japanese-base-lite-head_only:
    cmd: poetry run python -m src.features.build_vector_db 
      models/oshizo/sbert-jsnli-luke-japanese-base-lite/sentences_head_only.cloudpickle
      models/oshizo/sbert-jsnli-luke-japanese-base-lite/embeddings_head_only.cloudpickle
      models/oshizo/sbert-jsnli-luke-japanese-base-lite/engine_head_only.cloudpickle
      --mlflow_run_name=pipeline
    deps:
    - path: 
        models/oshizo/sbert-jsnli-luke-japanese-base-lite/embeddings_head_only.cloudpickle
      hash: md5
      md5: bcd0daf1524b5c299116d3472232dae7
      size: 92298
    - path: 
        models/oshizo/sbert-jsnli-luke-japanese-base-lite/sentences_head_only.cloudpickle
      hash: md5
      md5: c171ff2794839915ad207819c3ea2321
      size: 151481
    - path: src/features/build_vector_db.py
      hash: md5
      md5: 7337a9289c70ca170d8c24d91593b1a2
      size: 1714
    - path: src/models/vector_engine.py
      hash: md5
      md5: 854c663bbe137652a813c1aaa4764d4d
      size: 4581
    outs:
    - path: models/oshizo/sbert-jsnli-luke-japanese-base-lite/engine_head_only.cloudpickle
      hash: md5
      md5: 059a9b2b6a683a0c9b77b82a8035fe8b
      size: 277324
  build_sentences_and_embeddings@oshizo/sbert-jsnli-luke-japanese-base-lite-chunk_split-10:
    cmd: poetry run python -m src.features.build_features data/interim/dataset.parquet
      models/oshizo/sbert-jsnli-luke-japanese-base-lite/sentences_chunk_split.cloudpickle
      models/oshizo/sbert-jsnli-luke-japanese-base-lite/embeddings_chunk_split.cloudpickle
      --mlflow_run_name=pipeline --model_name_or_filepath=oshizo/sbert-jsnli-luke-japanese-base-lite
      --embedding_method=chunk_split --limit_sentence_size=10
    deps:
    - path: data/interim/dataset.parquet
      hash: md5
      md5: bc237833c9ceab972308b563cfaf3b11
      size: 15023178
    - path: src/features/build_features.py
      hash: md5
      md5: 421d4aa7d2ba1dab2dda0b64e1c718a9
      size: 2534
    - path: src/models/embedder.py
      hash: md5
      md5: 49e1bdf97565daee8256e146d45a93bc
      size: 6916
    - path: src/models/vector_engine.py
      hash: md5
      md5: 854c663bbe137652a813c1aaa4764d4d
      size: 4581
    outs:
    - path: 
        models/oshizo/sbert-jsnli-luke-japanese-base-lite/embeddings_chunk_split.cloudpickle
      hash: md5
      md5: 3cd1ec703a3bfdf5ec7848c71383dfb9
      size: 61569
    - path: 
        models/oshizo/sbert-jsnli-luke-japanese-base-lite/sentences_chunk_split.cloudpickle
      hash: md5
      md5: 1663b3619083cf679055bef945b7d725
      size: 74847
  build_sentences_and_embeddings@oshizo/sbert-jsnli-luke-japanese-base-lite-head_only-10:
    cmd: poetry run python -m src.features.build_features data/interim/dataset.parquet
      models/oshizo/sbert-jsnli-luke-japanese-base-lite/sentences_head_only.cloudpickle
      models/oshizo/sbert-jsnli-luke-japanese-base-lite/embeddings_head_only.cloudpickle
      --mlflow_run_name=pipeline --model_name_or_filepath=oshizo/sbert-jsnli-luke-japanese-base-lite
      --embedding_method=head_only --limit_sentence_size=10
    deps:
    - path: data/interim/dataset.parquet
      hash: md5
      md5: bc237833c9ceab972308b563cfaf3b11
      size: 15023178
    - path: src/features/build_features.py
      hash: md5
      md5: 421d4aa7d2ba1dab2dda0b64e1c718a9
      size: 2534
    - path: src/models/embedder.py
      hash: md5
      md5: 49e1bdf97565daee8256e146d45a93bc
      size: 6916
    - path: src/models/vector_engine.py
      hash: md5
      md5: 854c663bbe137652a813c1aaa4764d4d
      size: 4581
    outs:
    - path: 
        models/oshizo/sbert-jsnli-luke-japanese-base-lite/embeddings_head_only.cloudpickle
      hash: md5
      md5: 26083b9dc803b7f591abad12783d5146
      size: 30849
    - path: 
        models/oshizo/sbert-jsnli-luke-japanese-base-lite/sentences_head_only.cloudpickle
      hash: md5
      md5: 1663b3619083cf679055bef945b7d725
      size: 74847
  build_vector_db@oshizo/sbert-jsnli-luke-japanese-base-lite-chunk_split:
    cmd: poetry run python -m src.features.build_vector_db 
      models/oshizo/sbert-jsnli-luke-japanese-base-lite/sentences_chunk_split.cloudpickle
      models/oshizo/sbert-jsnli-luke-japanese-base-lite/embeddings_chunk_split.cloudpickle
      models/oshizo/sbert-jsnli-luke-japanese-base-lite/engine_chunk_split.cloudpickle
      --mlflow_run_name=pipeline
    deps:
    - path: 
        models/oshizo/sbert-jsnli-luke-japanese-base-lite/embeddings_chunk_split.cloudpickle
      hash: md5
      md5: eb2b8475888c0ba5f11c7be24b289b7d
      size: 184458
    - path: 
        models/oshizo/sbert-jsnli-luke-japanese-base-lite/sentences_chunk_split.cloudpickle
      hash: md5
      md5: c171ff2794839915ad207819c3ea2321
      size: 151481
    - path: src/features/build_vector_db.py
      hash: md5
      md5: 7337a9289c70ca170d8c24d91593b1a2
      size: 1714
    - path: src/models/vector_engine.py
      hash: md5
      md5: 854c663bbe137652a813c1aaa4764d4d
      size: 4581
    outs:
    - path: models/oshizo/sbert-jsnli-luke-japanese-base-lite/engine_chunk_split.cloudpickle
      hash: md5
      md5: fb5d21302b250a5586821f09ad1e1686
      size: 461644
  recommend@oshizo/sbert-jsnli-luke-japanese-base-lite-chunk_split:
    cmd: poetry run python -m src.models.recommend models/oshizo/sbert-jsnli-luke-japanese-base-lite/engine_chunk_split.cloudpickle
      --mlflow_run_name=pipeline --model_name_or_filepath=oshizo/sbert-jsnli-luke-japanese-base-lite
    deps:
    - path: models/oshizo/sbert-jsnli-luke-japanese-base-lite/engine_chunk_split.cloudpickle
      hash: md5
      md5: fb5d21302b250a5586821f09ad1e1686
      size: 461644
    - path: src/models/embedder.py
      hash: md5
      md5: 49e1bdf97565daee8256e146d45a93bc
      size: 6916
    - path: src/models/recommend.py
      hash: md5
      md5: 2f9019fce46687f4af44aef2ac5f3892
      size: 2140
    - path: src/models/vector_engine.py
      hash: md5
      md5: 854c663bbe137652a813c1aaa4764d4d
      size: 4581
  recommend@oshizo/sbert-jsnli-luke-japanese-base-lite-head_only:
    cmd: poetry run python -m src.models.recommend models/oshizo/sbert-jsnli-luke-japanese-base-lite/engine_head_only.cloudpickle
      --mlflow_run_name=pipeline --model_name_or_filepath=oshizo/sbert-jsnli-luke-japanese-base-lite
    deps:
    - path: models/oshizo/sbert-jsnli-luke-japanese-base-lite/engine_head_only.cloudpickle
      hash: md5
      md5: 059a9b2b6a683a0c9b77b82a8035fe8b
      size: 277324
    - path: src/models/embedder.py
      hash: md5
      md5: 49e1bdf97565daee8256e146d45a93bc
      size: 6916
    - path: src/models/recommend.py
      hash: md5
      md5: 2f9019fce46687f4af44aef2ac5f3892
      size: 2140
    - path: src/models/vector_engine.py
      hash: md5
      md5: 854c663bbe137652a813c1aaa4764d4d
      size: 4581
  build_sentences_and_embeddings@oshizo/sbert-jsnli-luke-japanese-base-lite-chunk_split:
    cmd: poetry run python -m src.features.build_features data/interim/dataset.parquet
      models/oshizo/sbert-jsnli-luke-japanese-base-lite/sentences_chunk_split.cloudpickle
      models/oshizo/sbert-jsnli-luke-japanese-base-lite/embeddings_chunk_split.cloudpickle
      --mlflow_run_name=pipeline --model_name_or_filepath=oshizo/sbert-jsnli-luke-japanese-base-lite
      --embedding_method=chunk_split --limit_sentence_size=30
    deps:
    - path: data/interim/dataset.parquet
      hash: md5
      md5: bc237833c9ceab972308b563cfaf3b11
      size: 15023178
    - path: src/features/build_features.py
      hash: md5
      md5: 421d4aa7d2ba1dab2dda0b64e1c718a9
      size: 2534
    - path: src/models/embedder.py
      hash: md5
      md5: 49e1bdf97565daee8256e146d45a93bc
      size: 6916
    - path: src/models/vector_engine.py
      hash: md5
      md5: 854c663bbe137652a813c1aaa4764d4d
      size: 4581
    outs:
    - path: 
        models/oshizo/sbert-jsnli-luke-japanese-base-lite/embeddings_chunk_split.cloudpickle
      hash: md5
      md5: eb2b8475888c0ba5f11c7be24b289b7d
      size: 184458
    - path: 
        models/oshizo/sbert-jsnli-luke-japanese-base-lite/sentences_chunk_split.cloudpickle
      hash: md5
      md5: c171ff2794839915ad207819c3ea2321
      size: 151481
  build_sentences_and_embeddings@oshizo/sbert-jsnli-luke-japanese-base-lite-head_only:
    cmd: poetry run python -m src.features.build_features data/interim/dataset.parquet
      models/oshizo/sbert-jsnli-luke-japanese-base-lite/sentences_head_only.cloudpickle
      models/oshizo/sbert-jsnli-luke-japanese-base-lite/embeddings_head_only.cloudpickle
      --mlflow_run_name=pipeline --model_name_or_filepath=oshizo/sbert-jsnli-luke-japanese-base-lite
      --embedding_method=head_only --limit_sentence_size=30
    deps:
    - path: data/interim/dataset.parquet
      hash: md5
      md5: bc237833c9ceab972308b563cfaf3b11
      size: 15023178
    - path: src/features/build_features.py
      hash: md5
      md5: 421d4aa7d2ba1dab2dda0b64e1c718a9
      size: 2534
    - path: src/models/embedder.py
      hash: md5
      md5: 49e1bdf97565daee8256e146d45a93bc
      size: 6916
    - path: src/models/vector_engine.py
      hash: md5
      md5: 854c663bbe137652a813c1aaa4764d4d
      size: 4581
    outs:
    - path: 
        models/oshizo/sbert-jsnli-luke-japanese-base-lite/embeddings_head_only.cloudpickle
      hash: md5
      md5: bcd0daf1524b5c299116d3472232dae7
      size: 92298
    - path: 
        models/oshizo/sbert-jsnli-luke-japanese-base-lite/sentences_head_only.cloudpickle
      hash: md5
      md5: c171ff2794839915ad207819c3ea2321
      size: 151481
  build_sentences_and_embeddings@sonoisa/sentence-bert-base-ja-mean-tokens-v2-head_only:
    cmd: poetry run python -m src.features.build_features data/interim/dataset.parquet
      models/sonoisa/sentence-bert-base-ja-mean-tokens-v2/sentences_head_only.cloudpickle
      models/sonoisa/sentence-bert-base-ja-mean-tokens-v2/embeddings_head_only.cloudpickle
      --mlflow_run_name=pipeline --model_name_or_filepath=sonoisa/sentence-bert-base-ja-mean-tokens-v2
      --embedding_method=head_only --limit_sentence_size=0
    deps:
    - path: data/interim/dataset.parquet
      hash: md5
      md5: bc237833c9ceab972308b563cfaf3b11
      size: 15023178
    - path: src/features/build_features.py
      hash: md5
      md5: 421d4aa7d2ba1dab2dda0b64e1c718a9
      size: 2534
    - path: src/models/embedder.py
      hash: md5
      md5: 49e1bdf97565daee8256e146d45a93bc
      size: 6916
    - path: src/models/vector_engine.py
      hash: md5
      md5: 854c663bbe137652a813c1aaa4764d4d
      size: 4581
    outs:
    - path: 
        models/sonoisa/sentence-bert-base-ja-mean-tokens-v2/embeddings_head_only.cloudpickle
      hash: md5
      md5: a8cbced9adba02afe3e5677360e1bf9a
      size: 22631563
    - path: 
        models/sonoisa/sentence-bert-base-ja-mean-tokens-v2/sentences_head_only.cloudpickle
      hash: md5
      md5: 100f5980cd44f4a4a201471be8ac6076
      size: 29648264
  build_vector_db@sonoisa/sentence-bert-base-ja-mean-tokens-v2-head_only:
    cmd: poetry run python -m src.features.build_vector_db 
      models/sonoisa/sentence-bert-base-ja-mean-tokens-v2/sentences_head_only.cloudpickle
      models/sonoisa/sentence-bert-base-ja-mean-tokens-v2/embeddings_head_only.cloudpickle
      models/sonoisa/sentence-bert-base-ja-mean-tokens-v2/engine_head_only.cloudpickle
      --mlflow_run_name=pipeline
    deps:
    - path: 
        models/sonoisa/sentence-bert-base-ja-mean-tokens-v2/embeddings_head_only.cloudpickle
      hash: md5
      md5: a8cbced9adba02afe3e5677360e1bf9a
      size: 22631563
    - path: 
        models/sonoisa/sentence-bert-base-ja-mean-tokens-v2/sentences_head_only.cloudpickle
      hash: md5
      md5: 100f5980cd44f4a4a201471be8ac6076
      size: 29648264
    - path: src/features/build_vector_db.py
      hash: md5
      md5: 7337a9289c70ca170d8c24d91593b1a2
      size: 1714
    - path: src/models/vector_engine.py
      hash: md5
      md5: 854c663bbe137652a813c1aaa4764d4d
      size: 4581
    outs:
    - path: models/sonoisa/sentence-bert-base-ja-mean-tokens-v2/engine_head_only.cloudpickle
      hash: md5
      md5: d788f3d29bb5f15a59f1d5b4acec05a1
      size: 67990513
  recommend@sonoisa/sentence-bert-base-ja-mean-tokens-v2-head_only:
    cmd: poetry run python -m src.models.recommend models/sonoisa/sentence-bert-base-ja-mean-tokens-v2/engine_head_only.cloudpickle
      --mlflow_run_name=pipeline --model_name_or_filepath=sonoisa/sentence-bert-base-ja-mean-tokens-v2
    deps:
    - path: models/sonoisa/sentence-bert-base-ja-mean-tokens-v2/engine_head_only.cloudpickle
      hash: md5
      md5: d788f3d29bb5f15a59f1d5b4acec05a1
      size: 67990513
    - path: src/models/embedder.py
      hash: md5
      md5: 49e1bdf97565daee8256e146d45a93bc
      size: 6916
    - path: src/models/recommend.py
      hash: md5
      md5: 2f9019fce46687f4af44aef2ac5f3892
      size: 2140
    - path: src/models/vector_engine.py
      hash: md5
      md5: 854c663bbe137652a813c1aaa4764d4d
      size: 4581
